<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Foundations | CAI</title>
  <meta name="description" content="Technical and mathematical foundations for Compression-Aware Intelligence." />
  <link rel="icon" href="assets/favicon.png" />
  <link rel="stylesheet" href="styles.css" />

  <!-- MathJax for equations -->
  <script>
    window.MathJax = {
      tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]},
      options: {skipHtmlTags: ['script','noscript','style','textarea','pre','code']}
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <script defer src="script.js"></script>
</head>
<body>
<header class="site-header">
  <a class="brand" href="index.html"><span class="logo"></span><span>CAI</span></a>
  <nav class="nav">
    <a href="index.html" data-nav>Home</a>
    <a href="proof.html" data-nav>Proof</a>
    <a href="principles.html" data-nav>Principles</a>
    <a href="foundations.html" data-nav>Foundations</a>
    <a href="applications.html" data-nav>Applications</a>
    <a href="contradictions.html" data-nav>Contradictions</a>
    <a href="research.html" data-nav>Research</a>
    <a href="glossary.html" data-nav>Glossary</a>
    <a href="faq.html" data-nav>FAQ</a>
    <a href="media.html" data-nav>Media</a>
    <a href="about.html" data-nav>About</a>
    <a href="contact.html" data-nav>Contact</a>
  </nav>
</header>

<main class="wrap" id="main">
  <h1>Foundations</h1>
  <p class="lede">Formal definitions, metrics, and a reference pipeline for building CAI-compliant systems.</p>

  <!-- Core primitives -->
  <section class="grid two">
    <div class="card">
      <h2>Primitives</h2>
      <ul>
        <li><strong>Compression site</strong> \(S_i\): a step that reduces data, structure, or context.</li>
        <li><strong>Path</strong> \(\mathcal{P} = \{S_1,\dots,S_n\}\): ordered sites that produce an output.</li>
        <li><strong>Artifact</strong>: any output at a site, with attached provenance.</li>
        <li><strong>Task loss</strong> \(L_{\text{task}}\): application-specific risk to minimize.</li>
        <li><strong>Provenance</strong>: list of sources, transforms, parameters, and seeds.</li>
      </ul>
    </div>
    <div class="card">
      <h2>Evidence contract</h2>
      <p>Every outward claim must be entailed by retrieved or computed evidence. If entailment fails, abstain.</p>
      <ul>
        <li>Retrieval from a trusted corpus with provenance.</li>
        <li>Deterministic or verifiable transforms where possible.</li>
        <li>Attribution in the final answer.</li>
      </ul>
    </div>
  </section>

  <!-- Metrics -->
  <section class="grid two">
    <div class="card">
      <h2>Compression Tension Score (CTS)</h2>
      <p>Per-site tension decomposed into information, task, provenance, and uncertainty terms.</p>
      <p>
        \[
        \mathrm{CTS}_i \;=\; w_I\,I_i \;+\; w_T\,T_i \;+\; w_P\,P_i \;+\; w_U\,U_i
        \]
      </p>
      <ul>
        <li>\(I_i\): information loss, e.g. \(D_{\mathrm{KL}}(p\parallel q_i)\) or rate reduction.</li>
        <li>\(T_i\): task degradation, e.g. delta in validation risk after the site.</li>
        <li>\(P_i\): provenance gap, e.g. missing sources, unverifiable transforms.</li>
        <li>\(U_i\): uncertainty amplification, e.g. increased variance or calibration error.</li>
      </ul>
      <p>
        Normalize each term to \([0,1]\), choose weights \(w_\ast \ge 0\) with \(\sum w_\ast = 1\).
      </p>
      <p>
        Path score: \(\mathrm{CTS}(\mathcal{P}) = \sum_{i=1}^{n} \alpha_i \,\mathrm{CTS}_i\), with \(\alpha_i\) as step weights
        (uniform, decay, or learned attention).
      </p>
    </div>

    <div class="card">
      <h2>Contradiction Score</h2>
      <p>Given two claims \(c_1, c_2\) with NLI probabilities \(p_E, p_C, p_N\):</p>
      <p>\[
        \mathrm{CS}(c_1,c_2) \;=\; p_C \,-\, p_E \quad \in [-1,1]
      \]</p>
      <ul>
        <li>\(\mathrm{CS} > 0\): net contradiction; \(\mathrm{CS} < 0\): net entailment.</li>
        <li>Attach pointers to evidence spans for both claims.</li>
      </ul>
      <p>Global contradiction for a set \(C\): maximum pairwise score or an aggregate over a conflict graph.</p>
    </div>

    <div class="card">
      <h2>Provenance Entropy</h2>
      <p>Measure concentration of evidence across sources \(\{s_k\}\) with weights \(p_k\):</p>
      <p>\[
        H_{\text{prov}} \;=\; -\sum_k p_k \log p_k, \qquad
        \mathrm{Conf}_{\text{prov}} \;=\; 1 - \frac{H_{\text{prov}}}{\log K}
      \]</p>
      <p>High confidence when a small set of strong sources dominate and are verifiable.</p>
    </div>

    <div class="card">
      <h2>Auditability</h2>
      <p>Share of steps that are reproducible with public artifacts.</p>
      <p>\[
        \mathrm{Audit}(\mathcal{P}) \;=\; \frac{\#\{\text{steps with replayable artifacts}\}}{n}
      \]</p>
      <p>Targets: \(\mathrm{Audit} \ge 0.9\) for public claims, \(\ge 0.7\) for internal.</p>
    </div>
  </section>

  <!-- Reference pipeline -->
  <section class="card">
    <h2>Reference pipeline</h2>
    <ol>
      <li><strong>Retrieve</strong> provenance-tagged spans \(E\) for a query.</li>
      <li><strong>Draft</strong> candidate answer with a generator constrained to cite spans.</li>
      <li><strong>Verify</strong> entailment \(E \models \hat{y}\) with a sound check where possible.</li>
      <li><strong>Score</strong> per-site CTS, path CTS, contradiction, provenance entropy, auditability.</li>
      <li><strong>Decide</strong>: if checks fail or scores cross thresholds, abstain with a short reason.</li>
      <li><strong>Emit</strong> answer with inline citations and a compact provenance footer.</li>
    </ol>

<pre><code>// example w minimal pseudo-API
POST /cai/answer
{
  "question": "what year was the lightbulb invented",
  "policy": {
    "abstain_if_no_entailment": true,
    "min_audit": 0.8,
    "max_path_cts": 0.35
  }
}

Response
{
  "answer": "the lightbulb was invented in 1879",
  "citations": [{"doc_id":"D45","span":"L102-110"}],
  "scores": {
    "cts_path": 0.24,
    "audit": 0.91,
    "prov_conf": 0.84,
    "contradiction": 0.00
  },
  "provenance": "retrieval:v3; reranker:nq; seed:17; model:gpt4o-mini"
}
</code></pre>
  </section>

  <!-- Formal abstention rule -->
  <section class="card">
    <h2>Abstention rule</h2>
    <p>
      Let \(V\) be a verifier that returns 1 for entailment and 0 otherwise.
      The system emits an answer only if
    </p>
    <p>
      \[
      V(E,\hat{y})=1,\quad \mathrm{CTS}(\mathcal{P}) \le \tau_{\text{cts}},\quad
      \mathrm{Audit}(\mathcal{P}) \ge \tau_{\text{audit}}
      \]
    </p>
    <p>Else it emits a calibrated abstain message with a short cause.</p>
  </section>

  <!-- Links to live artifacts -->
  <section class="grid two">
    <div class="card">
      <h2>Spec and overview</h2>
      <ul>
        <li><a href="https://zenodo.org/records/16467706" target="_blank" rel="noopener">CAI overview</a></li>
      </ul>
    </div>
    <div class="card">
      <h2>Code and demos</h2>
      <ul>
        <li><a href="https://github.com/michelejoseph/compression-aware-intelligence-demo" target="_blank" rel="noopener">Prototype repos with compression tags</a></li>
      </ul>
    </div>
  </section>
</main>

<footer class="site-footer">
  <small>Â© <span id="year"></span> Compression Aware Intelligence. mirrornetinquiries@gmail.com</small>
</footer>
</body>
</html>
